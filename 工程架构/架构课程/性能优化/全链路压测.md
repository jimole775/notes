# 全链路压测的挑战
1. 压测相关的业务系统上众多，并且牵涉到整条链路上所有的基础设置和中间件，如何确保压测流量能够畅通无阻，没有死角。压测的数据怎么构造（亿万级别的商品和用户），数据模型如何与真是贴近？

2. 全链路压测直接在线上的真是环境进行模拟，怎么样来保障对线上无影响？

3. 大型促销获得所带来的巨大流量要怎么样制作出来？

# 天猫双十一案例分析

## 数据构造

获取线上用户访问数据 => dump => 筛选、脱敏、ID隔离、订正 => 压测基础数据池、Bi数据中心 => 数据构造平台 => 线上应用

## 数据隔离的三种方式：（各有利弊）
- 逻辑隔离：直接把测试数据和张昌数据写到一起，通过特殊的标识能够区分开。
1. 可能污染线上数据，破坏线上数据的安全性

- 虚拟隔离：在所有写数据的地方做 mock，并不真正的写进去
1. 这个方案不会对线上产生污染，但是 mock 对压测结果的准确性会产生干扰

- 物理隔离：所有写数据的地方对压测流量进行识别，判断一旦是压测流量的写，就写到隔离的位置，包括存储、缓存、搜索引擎等等

## 流量构造
1. 构建一个全链路的流量平台，通过CDN服务器来模拟用户请求
2. 流量控制台作为 master，控制全国各地的CDN服务器，同时向天猫服务器发起请求

## 天猫全链路压测平台化
可应用到其他的系统、产品线，可作为服务给外部系统提供链路压测（阿里云有卖）