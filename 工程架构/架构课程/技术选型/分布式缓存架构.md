- 缓存数据存储结构（Hash表）

# 缓存的关键指标
- 缓存命中率：一个缓存数据的数据，可重用的比率；比如：十次访问，有九次是从缓存读取的，那么这个缓存的命中率就是90%

## 缓存命中率的主要指标
- 缓存键集合的大小：保持缓存键的唯一性所需要的数量。比如：缓存国家，需要几百个键就可以了；缓存IP地址，就需要40亿个键。
- 缓存可使用的内存空间：物理上可使用的缓存空间越多，命中率越高。
- 缓存数据的生存时间：TTL（Time To Live），长期有效的数据更适合使用缓存。

# 常见的缓存实现形式
1. 代理缓存
客户端的网络代理服务器，会缓存访问的内容，当缓存未命中的时候再访问 web 服务器

2. 反向代理缓存
数据中心的代理服务器，缓存被访问过的内容，当缓存未命中的时候再访问 service 服务器

3. 内容分发网络（CDN）
离用户最近的地方，为用户提供访问内容，如果缓存未命中，再通过 url 请求数据中心。

4. 浏览器对象缓存

5. 本地对象缓存

# Memcached 分布式缓存
## 路由算法
- 余数 hash 算法：Hash(key)%N

使用 key 的 hash 值对服务器台数进行取模，余数是几，就取哪台服务器。

- 一致性 hash 算法：

使用 0 ~ (2^32) - 1 的正整数作为一个闭环，然后通过把服务器 IP 或者主机名转成 hash 值，映射到这个环上面，然后 Hash(key) 的值顺时针靠近哪个服务器的节点，就取哪台服务器。

- 基于虚拟节点的一致性 hash 算法
[详解参考](https://zhuanlan.zhihu.com/p/98030096)